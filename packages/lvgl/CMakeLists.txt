SET(LVGL_NAME lvgl)
MESSAGE(STATUS "CMake: ${LVGL_NAME}")
SET(LVGL_ROOT_DIR .)
SET(LV_SRC_DIR ${LVGL_ROOT_DIR}/src)
SET(LV_RTT_SRC_DIR ${LVGL_ROOT_DIR}/rt_thread_port/lv_rt_thread_port.c)
FILE(GLOB_RECURSE LV_SOURCES ${LV_SRC_DIR}/*.c)

ADD_LIBRARY(${LVGL_NAME} OBJECT ${LV_SOURCES} ${LV_RTT_SRC_DIR})

TARGET_LINK_LIBRARIES(${LVGL_NAME} PUBLIC rt-thread)

TARGET_COMPILE_DEFINITIONS(
     ${LVGL_NAME} PUBLIC 
          __RTTHREAD__
          STM32F4
)

TARGET_INCLUDE_DIRECTORIES(
     ${LVGL_NAME} SYSTEM PUBLIC 
          ${LVGL_ROOT_DIR}
          ${LVGL_ROOT_DIR}/rt_thread_port
          ${LV_SRC_DIR}
)

SET(LVGL_PUBLIC_HEADERS "${LVGL_ROOT_DIR}/lv_conf.h"
     "${LVGL_ROOT_DIR}/lvgl.h")
     
SET_TARGET_PROPERTIES(
     ${LVGL_NAME} PROPERTIES
          PUBLIC_HEADER "${LVGL_PUBLIC_HEADERS}"
)
